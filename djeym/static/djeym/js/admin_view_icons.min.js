$(document).ready(function(){"use strict";function ajaxGetIcon(ajaxURL,$image,objID){parseInt(objID)?$.getJSON(ajaxURL,{obj_id:objID}).done(function(data){$image.attr("src",data.url).show()}).fail(function(jqxhr,textStatus,error){let err=textStatus+", "+error,errDetail="";void 0!==jqxhr.responseJSON&&jqxhr.responseJSON.hasOwnProperty("detail")&&(errDetail=jqxhr.responseJSON.detail),0!==errDetail.length?console.log("Request Failed: "+err+" - "+errDetail):console.log("Request Failed: "+err)}):$image.hide()}jQuery.expr[":"].regex=function(elem,index,match){let matchParams=match[3].split(","),validLabels=/^(data|css):/,attr={method:matchParams[0].match(validLabels)?matchParams[0].split(":")[0]:"attr",property:matchParams.shift().replace(validLabels,"")},regexFlags="ig",regex;return new RegExp(matchParams.join("").replace(/^\s+|\s+$/g,""),"ig").test(jQuery(elem)[attr.method](attr.property))};let idForm=$("form").eq(0).attr("id");if(/^category/.test(idForm)||/^subcategory/.test(idForm)||/^map/.test(idForm)){let $icon=$("#id_category_icon, input:regex(id, ^id_presets-.*-icon)");$icon.each(function(){let $this=$(this);$this.after('<span class="view_icon">'+$this.val()+"</span>")}),$icon.on("keyup mouseup mouseout",function(event){let $this=$(this);$this.parent().find(".view_icon").html($this.val())})}if(/^map_form/.test(idForm)){let $iconCluster=$("#id_icon_cluster"),clusterIconID=$iconCluster.find("option:selected").val(),ajaxClusterIconURL="/djeym/ajax-cluster-icon/",$iconCollection=$("#id_icon_collection"),ajaxExampleIconURL="/djeym/ajax-collection-example-icon/",collectionIconID=$iconCollection.find("option:selected").val(),$tileSource=$("#id_tile"),tileSourceID=$tileSource.find("option:selected").val(),ajaxTileSourceURL="/djeym/ajax-tile-screenshot/",$iconLoadIndicator=$("#id_load_indicator"),loadIndicatorIconID=$iconLoadIndicator.find("option:selected").val(),ajaxLoadIndicatorIconURL="/djeym/ajax-load-indicator-icon/",$imageClusterIcon,$imageExampleIcon,$imageTile,$imageLoadIndicator;0!==$("#id_icon_cluster option:selected").val().length&&0!==$("#id_icon_collection option:selected").val().length||$(".editing_map_link").hide(),$iconCluster.parent().addClass("custom_cluster_icon_wrapper").append('<img src="" id="id_custom_cluster_icon" alt="Cluster Icon">'),$imageClusterIcon=$("#id_custom_cluster_icon"),ajaxGetIcon(ajaxClusterIconURL,$imageClusterIcon,clusterIconID),$iconCluster.on("change",function(event){clusterIconID=$(this).find("option:selected").val(),ajaxGetIcon(ajaxClusterIconURL,$imageClusterIcon,clusterIconID)}),$iconCollection.parent().addClass("icon_collection_wrapper").append('<img src="" id="id_collection_example_icon" alt="Example Icon">'),$imageExampleIcon=$("#id_collection_example_icon"),ajaxGetIcon(ajaxExampleIconURL,$imageExampleIcon,collectionIconID),$iconCollection.on("change",function(event){collectionIconID=$(this).find("option:selected").val(),ajaxGetIcon(ajaxExampleIconURL,$imageExampleIcon,collectionIconID)}),$tileSource.parent().addClass("tile_screenshot_wrapper").append('<img src="" id="id_tile_screenshot" alt="Screenshot">'),$imageTile=$("#id_tile_screenshot"),tileSourceID.length>0?ajaxGetIcon(ajaxTileSourceURL,$imageTile,tileSourceID):$imageTile.attr("src","/static/djeym/img/default_tile.png").show(),$tileSource.on("change",function(event){(tileSourceID=$(this).find("option:selected").val()).length>0?ajaxGetIcon(ajaxTileSourceURL,$imageTile,tileSourceID):$imageTile.attr("src","/static/djeym/img/default_tile.png").show()}),$iconLoadIndicator.parent().addClass("load_indicator_icon_wrapper").append('<img src="" id="id_icon_load_indicator" alt="Icon">'),$imageLoadIndicator=$("#id_icon_load_indicator"),ajaxGetIcon(ajaxLoadIndicatorIconURL,$imageLoadIndicator,loadIndicatorIconID),$iconLoadIndicator.on("change",function(event){loadIndicatorIconID=$(this).find("option:selected").val(),ajaxGetIcon(ajaxLoadIndicatorIconURL,$imageLoadIndicator,loadIndicatorIconID)})}});